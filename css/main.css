/* 
  БЛОК 35: main.css v6
  Изменения:
  1. Исправлен шрифт (100% рабочая версия)
  2. Ярлычки меньше и прижаты к границам
  3. Иконки в ярлычках меньше
  4. Кружки для линий увеличены
  5. Убран "Все модули" с главного экрана
*/

/* 1. ШРИФТ - ИСПРАВЛЕННАЯ ВЕРСИЯ */
@font-face {
    font-family: 'CrySis';
    src: url('../fonts/CrySis_Bold_2.ttf') format('truetype');
    font-weight: 700;
    font-style: normal;
    font-display: block; /* Важно для iOS */
}

/* Принудительно применяем шрифт ко всем элементам */
* {
    font-family: 'CrySis', 'Arial Black', sans-serif !important;
}

/* 2. ЯРЛЫЧКИ - МЕНЬШЕ И ПРИЖАТЫ К ГРАНИЦАМ */
.side-tab {
    position: absolute;
    width: 50px; /* Было 60px */
    height: 50px; /* Было 60px */
    background-color: var(--color-button);
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 50;
    padding: 0;
    margin: 0;
    /* Прижимаем к самым границам */
    top: 70px !important;
    bottom: 70px !important;
}

.side-tab:hover {
    background-color: var(--color-button-hover);
    transform: scale(1.05);
}

.tab-icon-img {
    width: 24px; /* Было 32px */
    height: 24px;
    filter: brightness(1.2);
}

/* Переопределяем позиции для прижатия к границам */
.health-tab {
    left: 0 !important;
    border-radius: 0 10px 10px 0;
}

.habits-tab {
    right: 0 !important;
    border-radius: 10px 0 0 10px;
}

.tasks-tab {
    left: 0 !important;
    border-radius: 0 10px 10px 0;
}

.finance-tab {
    right: 0 !important;
    border-radius: 10px 0 0 10px;
}

/* 3. КРУЖКИ ДЛЯ ЛИНИЙ - БОЛЬШЕ */
.dot {
    position: absolute;
    width: 12px; /* Было 8px */
    height: 12px;
    background-color: var(--color-line);
    border-radius: 50%;
    border: 2px solid var(--color-card);
    box-shadow: 0 0 8px rgba(50, 205, 50, 0.9);
    z-index: 20;
}

/* 4. ЛИНИИ - СПЛОШНЫЕ, ЛОМАНЫЕ */
.connection-line {
    fill: none;
    stroke: var(--color-line);
    stroke-width: 2;
    stroke-dasharray: none !important; /* Убираем пунктир */
    opacity: 0.8;
    transition: opacity 0.3s ease;
}

/* 5. УБИРАЕМ "ВСЕ МОДУЛИ" С ГЛАВНОГО ЭКРАНА */
.all-modules-panel {
    display: none !important; /* Скрываем полностью */
}

/* 6. ПАНЕЛЬ ВСЕХ ПАНЕЛЕЙ - ФОН */
.all-panels-background {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: var(--color-panel);
    z-index: 149;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s ease;
}

.all-panels-background.active {
    opacity: 0.95;
    visibility: visible;
}

/* 7. КРЕСТИК ЗАКРЫТИЯ - ТЁМНО-ЗЕЛЁНЫЙ */
.all-panels-close {
    position: fixed;
    top: 15px;
    right: 15px;
    width: 32px;
    height: 32px;
    background-color: var(--color-button); /* Тёмно-зелёный */
    border: 2px solid var(--color-accent);
    border-radius: 50%;
    color: var(--color-text);
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 160;
    opacity: 0;
    visibility: hidden;
    box-shadow: 0 0 10px rgba(42, 165, 42, 0.5);
}

.all-panels-close.active {
    opacity: 1;
    visibility: visible;
}

.all-panels-close:hover {
    background-color: var(--color-button-hover);
    transform: rotate(90deg) scale(1.1);
}

/* 8. КРЕСТИКИ НА БОКОВЫХ ПАНЕЛЯХ - ТЁМНО-ЗЕЛЁНЫЕ */
.panel-close {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 26px;
    height: 26px;
    background-color: var(--color-button); /* Тёмно-зелёный */
    border: 2px solid var(--color-accent);
    border-radius: 50%;
    color: var(--color-text);
    font-size: 16px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
    z-index: 160;
    opacity: 0;
    visibility: hidden;
}

.corner-panel.active .panel-close {
    opacity: 1;
    visibility: visible;
}

.panel-close:hover {
    background-color: var(--color-button-hover);
    transform: rotate(90deg) scale(1.1);
}

/* 9. КОГДА ВСЕ ПАНЕЛИ ОТКРЫТЫ - УБИРАЕМ ПУСТОТУ */
.all-panels-open .corner-panel {
    border-width: 0;
    box-shadow: none;
}

.all-panels-open .health-panel {
    border-right: 2px solid var(--color-accent);
    border-bottom: 2px solid var(--color-accent);
    border-radius: 0;
}

.all-panels-open .habits-panel {
    border-left: 2px solid var(--color-accent);
    border-bottom: 2px solid var(--color-accent);
    border-radius: 0;
}

.all-panels-open .tasks-panel {
    border-right: 2px solid var(--color-accent);
    border-top: 2px solid var(--color-accent);
    border-radius: 0;
}

.all-panels-open .finance-panel {
    border-left: 2px solid var(--color-accent);
    border-top: 2px solid var(--color-accent);
    border-radius: 0;
}

/* Скрываем крестики на панелях когда открыты все */
.all-panels-open .panel-close {
    display: none;
}

/* 10. АДАПТИВНОСТЬ */
@media (max-width: 500px) {
    .side-tab {
        width: 45px;
        height: 45px;
        top: 65px !important;
        bottom: 65px !important;
    }
    
    .tab-icon-img {
        width: 22px;
        height: 22px;
    }
    
    .human-image {
        width: 200px;
        height: 250px;
    }
    
    .dot {
        width: 10px;
        height: 10px;
    }
}